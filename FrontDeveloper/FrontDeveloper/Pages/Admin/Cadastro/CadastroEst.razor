@page "/CadastroEst"
@using FrontDeveloper.Models
@using MudBlazor


@inject NavigationManager Navigation
@inject ISnackbar Snackbar

<MudPaper Class="pa-4">
    <MudText Typo="Typo.h4" Align="Align.Center">Cadastro de Estudante</MudText>

    <MudForm @ref="form" OnValidSubmit="HandleValidSubmit">
        <MudGrid>
            <!-- Linha 1 -->
            <MudItem xs="3">
                <MudTextField ShrinkLabel @bind-Value="nome" Label="Nome" Variant="Variant.Outlined" />
            </MudItem>
            <MudItem xs="3">
                <MudSelect @bind-Value="genero" Label="Gênero" Variant="Variant.Outlined">
                    <MudSelectItem Value="@("Masculino")" />
                    <MudSelectItem Value="@("Feminino")" />
                    <MudSelectItem Value="@("Outro")" />
                </MudSelect>
            </MudItem>
            <MudItem xs="3">
                <MudDatePicker
                    Label="Data de Nascimento"
                    Editable="true"
                    @bind-Date="_dataNascimento"
                    Mask="@(new DateMask("0000-00-00"))"
                    DateFormat="yyyy-MM-dd"
                    Placeholder="ISO Date"
                    Variant="Variant.Outlined" />
            </MudItem>
            <MudItem xs="3">
                <MudSelect @bind-Value="periodo" Label="Período" Variant="Variant.Outlined">
                    <MudSelectItem Value="@("Manhã")" />
                    <MudSelectItem Value="@("Tarde")" />
                    <MudSelectItem Value="@("Pós-Laboral")" />
                </MudSelect>
            </MudItem>

            <!-- Linha 2 -->
            <MudItem xs="3">
                <MudSelect @bind-Value="curso" Label="Curso" Variant="Variant.Outlined">
                    <MudSelectItem Value="@("Ciência da Computação")" />
                    <MudSelectItem Value="@("Engenharia Elétrica")" />
                    <MudSelectItem Value="@("Administração")" />
                </MudSelect>
            </MudItem>
            <MudItem xs="3">
                <MudSelect @bind-Value="anoLectivo" Label="Ano Letivo" Variant="Variant.Outlined">
                    <MudSelectItem Value="@("2024/2025")" />
                    <MudSelectItem Value="@("2025/2026")" />
                    <MudSelectItem Value="@("2026/2027")" />
                </MudSelect>
            </MudItem>
            <MudItem xs="3">
                <MudSelect @bind-Value="classe" Label="Classe" Variant="Variant.Outlined">
                    <MudSelectItem Value="@("10")" />
                    <MudSelectItem Value="@("11")" />
                    <MudSelectItem Value="@("12")" />
                </MudSelect>
            </MudItem>
            <MudItem xs="3">
                <MudSelect @bind-Value="turma" Label="Turma" Variant="Variant.Outlined">
                    <MudSelectItem Value="@("A")" />
                    <MudSelectItem Value="@("B")" />
                    <MudSelectItem Value="@("C")" />
                </MudSelect>
            </MudItem>

            <!-- Linha 3 -->
            <MudItem xs="3">
                <MudSelect @bind-Value="sala" Label="Sala" Variant="Variant.Outlined">
                    <MudSelectItem Value="@("Sala 01")" />
                    <MudSelectItem Value="@("Sala 02")" />
                    <MudSelectItem Value="@("Sala 03")" />
                </MudSelect>
            </MudItem>
            <MudItem xs="3">
                <MudTextField ShrinkLabel @bind-Value="telefone" Label="Telefone" Variant="Variant.Outlined" />
            </MudItem>
            <MudItem xs="3">
                <MudTextField ShrinkLabel @bind-Value="morada" Label="Morada" Variant="Variant.Outlined" />
            </MudItem>
            <MudItem xs="3">
                <MudTextField ShrinkLabel @bind-Value="email" Label="Email" Variant="Variant.Outlined" />
            </MudItem>
        </MudGrid>

        <!-- Botão Cadastrar -->
        <MudButton
            Href="/Admin/ListaEstudantes"
            Type="Submit"
            Color="Color.Success"
            Variant="Variant.Filled"
            FullWidth="true"
            @onclick="@(() => Snackbar.Add("Cadastro Realizado Com Sucesso!", Severity.Success))">
            Cadastrar
        </MudButton>
    </MudForm>
</MudPaper>


@code {

   

    private string nome, genero, periodo, curso, anoLectivo, classe, turma, sala, telefone, morada, email;
    private DateTime? _dataNascimento = null;
    private MudForm form;
    private ElementReference snackbar;

    private async Task HandleValidSubmit()
    {
        // Após o cadastro, redireciona para a página de listagem
        Navigation.NavigateTo("/Admin/ListaEstudantes");
    }
}



